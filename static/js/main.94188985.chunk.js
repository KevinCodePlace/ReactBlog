(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{32:function(n,t,e){"use strict";e.r(t);var r=e(0),c=e(1),i=e(19),o=e.n(i),a=e(6),u=e(2),s=e(3),b=e(5),j=e(10),d=Object(c.createContext)(null),l="token",f=function(n){localStorage.setItem(l,n)},p=function(){return localStorage.getItem(l)};function x(){var n=Object(u.a)(["\n    display: flex;\n    align-items: center;\n"]);return x=function(){return n},n}function h(){var n=Object(u.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    box-sizing: border-box;\n    width: 100px;\n    cursor: pointer;\n    color:black;\n    text-decoration: none;\n\n    background: ",";\n"]);return h=function(){return n},n}function O(){var n=Object(u.a)(["\n    display: flex;\n    align-item: center;\n    height: 64px;\n"]);return O=function(){return n},n}function g(){var n=Object(u.a)(["\n    font-size: 32px;\n    font-weight: bold;\n    margin-right: 64px;\n"]);return g=function(){return n},n}function v(){var n=Object(u.a)(["\n    height: 64px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n    padding: 0px 32px;\n    box-sizing: border-box;\n    background:white;\n"]);return v=function(){return n},n}var m=s.a.div(v()),w=s.a.div(g()),y=s.a.div(O()),k=Object(s.a)(j.b)(h(),(function(n){return n.background})),S=s.a.div(x()),C=function(){var n=Object(b.g)(),t=Object(b.f)(),e=Object(c.useContext)(d),i=e.user,o=e.setUser;return Object(r.jsxs)(m,{children:[Object(r.jsxs)(S,{children:[Object(r.jsx)(w,{children:"\u6211\u7684\u7b2c\u4e00\u500b\u90e8\u843d\u683c"}),Object(r.jsxs)(y,{children:[Object(r.jsx)(k,{background:"/"===n.pathname?"rgba(0,0,0, 0.2)":"",to:"/",children:"\u9996\u9801"}),Object(r.jsx)(k,{background:"/post-list"===n.pathname?"rgba(0,0,0, 0.2)":"",to:"/post-list",children:"\u6587\u7ae0\u5217\u8868"}),Object(r.jsx)(k,{background:"/about"===n.pathname?"rgba(0,0,0, 0.2)":"",to:"/about",children:"\u95dc\u65bc"}),i&&Object(r.jsx)(k,{background:"/new-post"===n.pathname?"rgba(0,0,0, 0.2)":"",to:"/new-post",children:"\u767c\u5e03\u6587\u7ae0"})]})]}),Object(r.jsxs)(y,{children:[!i&&Object(r.jsx)(k,{background:"/login"===n.pathname?"rgba(0,0,0, 0.2)":"",to:"/login",children:"\u767b\u5165"}),!i&&Object(r.jsx)(k,{background:"/register"===n.pathname?"rgba(0,0,0, 0.2)":"",to:"/register",children:"\u8a3b\u518a"}),i&&Object(r.jsx)(k,{onClick:function(){f(" "),o(null),"/"!==n.pathname&&t.push("/")},children:"\u767b\u51fa"})]})]})},z="https://student-json-api.lidemy.me",D=function(){var n=p();return fetch("".concat(z,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},E=function(){return fetch("".concat(z,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},M=function(n){return fetch("".concat(z,"/posts?_page=").concat(n,"&_limit=5&_sort=id&_order=desc")).then((function(n){return n.json()}))},B=e(11),I=e.n(B);function P(){var n=Object(u.a)(["\n  margin-left: 5px;\n  border:1px solid gray;\n  border-radius:3px;\n  &:hover {\n    background:red;\n    color:white;\n    cursor:pointer;\n  }\n\n"]);return P=function(){return n},n}function U(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return U=function(){return n},n}function A(){var n=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n  flex:1;\n"]);return A=function(){return n},n}function J(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n"]);return J=function(){return n},n}function N(){var n=Object(u.a)(["\n  top:64px;\n  left:150px;\n  width: 80%;\n  margin: 0 auto;\n  height:80vh;\n   \n"]);return N=function(){return n},n}var T=s.a.div(N()),_=s.a.div(J()),H=Object(s.a)(j.b)(A()),q=s.a.div(U()),L=s.a.div(P()),F=function(n){(function(n){var t=p();return fetch("".concat(z,"/posts/").concat(n),{method:"DELETE",headers:{"content-type":"application/json",authorization:"Bearer ".concat(t)}}).then((function(n){return n.json()}))})(n).then((function(n){if(0===n.ok)return alert("\u522a\u9664\u5931\u6557");alert("\u522a\u9664\u6210\u529f\uff01"),window.location.reload()}))},Q=function(n){var t=n.post,e=n.user,c=t.id;return Object(r.jsxs)(_,{children:[Object(r.jsx)(H,{to:"/posts/".concat(c),children:t.title}),Object(r.jsx)(q,{children:new Date(t.createdAt).toLocaleString()}),Object(r.jsx)(L,{onClick:function(){return F(c)},children:e?"\u522a\u9664":" "})]})};Q.prototypes={post:I.a.object};var X=function(n){var t=n.posts,e=n.setPosts,i=Object(c.useContext)(d),o=i.user;i.setUser;return Object(c.useEffect)((function(){E().then((function(n){return e(n)}))}),[]),Object(r.jsx)(T,{children:t.map((function(n){return Object(r.jsx)(Q,{post:n,user:o},n.id)}))})};function Y(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 25px;\n  height: 25px;\n  margin: 0 10px;\n  border: 1px solid #fbfbfb;\n  border-radius: 3px;\n  list-style: none;\n  cursor: pointer;\n  font-size: 20px;\n  &:hover {\n    background: rgba(200, 200, 200, 0.1);\n  }\n"]);return Y=function(){return n},n}function W(){var n=Object(u.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n  padding: 0;\n"]);return W=function(){return n},n}function R(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return R=function(){return n},n}function Z(){var n=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n"]);return Z=function(){return n},n}function G(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n\n  &:hover {\n    background: rgba(200, 200, 200, 0.1);\n  }\n"]);return G=function(){return n},n}function K(){var n=Object(u.a)(["\n  top:64px;\n  left:150px;\n  width: 80%;\n  margin: 0 auto;\n  height:80vh;\n   \n"]);return K=function(){return n},n}var V=s.a.div(K()),$=s.a.div(G()),nn=Object(s.a)(j.b)(Z()),tn=s.a.div(R()),en=s.a.ul(W()),rn=s.a.li(Y()),cn=function(n){var t=n.post;return Object(r.jsxs)($,{children:[Object(r.jsx)(nn,{to:"/posts/".concat(t.id),children:t.title}),Object(r.jsx)(tn,{children:new Date(t.createdAt).toLocaleString()})]})},on=function(){var n=Object(c.useState)([]),t=Object(a.a)(n,2),e=t[0],i=t[1],o=Object(c.useState)([]),u=Object(a.a)(o,2),s=u[0],b=u[1];Object(c.useEffect)((function(){E().then((function(n){var t=Math.ceil(n.length/5);i(function(n){for(var t=[],e=1;e<=n;e++)t.push(e);return t}(t)),M(1).then((function(n){b(n)}))}))}),[]);var j=function(n){return function(){M(n).then((function(n){b(n)}))}};return Object(r.jsxs)(V,{children:[s.length>0?s.map((function(n){return Object(r.jsx)(cn,{post:n},n.id)})):Object(r.jsx)(cn,{post:{title:"Loading..."}}),Object(r.jsx)(en,{children:s.length>0&&e.map((function(n){return Object(r.jsx)(rn,{onClick:j(n),children:n},n)}))})]})};function an(){var n=Object(u.a)(["\n  margin:20px auto;\n  width: 50%;\n  height:calc(100vh - 330px);\n  background: url(https://ca.slack-edge.com/T4CNEQF6C-U4E4QE7N3-003d575a1cb1-512) center/cover no-repeat;\n"]);return an=function(){return n},n}function un(){var n=Object(u.a)(["\n  word-wrap: break-word;\n  width:calc(100%-50px);\n  padding:30px;\n"]);return un=function(){return n},n}function sn(){var n=Object(u.a)(["\n  text-align: center;  \n  width: 50%;\n  margin-top:30px;\n"]);return sn=function(){return n},n}function bn(){var n=Object(u.a)(["\n  border: 1px solid gray;\n  width:  50%;\n  height:  calc(100vh - 70px);\n  background: url(https://images.unsplash.com/photo-1529673736833-9302d731fc8f?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxzZWFyY2h8NHx8YWJvdXQlMjB1c3xlbnwwfHwwfA%3D%3D&auto=format&fit=crop&w=600&q=60) center/cover no-repeat;\n"]);return bn=function(){return n},n}function jn(){var n=Object(u.a)(["\n  display: flex;\n  box-sizing: border-box;\n"]);return jn=function(){return n},n}var dn=s.a.div(jn()),ln=s.a.div(bn()),fn=s.a.div(sn()),pn=s.a.div(un()),xn=s.a.div(an()),hn=function(){return Object(r.jsxs)(dn,{children:[Object(r.jsx)(ln,{}),Object(r.jsxs)(fn,{children:[Object(r.jsx)("div",{children:"\u95dc\u65bc\u6211\u5011\uff08\u53d6\u81ea Huli\uff09"}),Object(r.jsxs)(pn,{children:["\u9019\u662f\u4e00\u500b\u6280\u8853\u90e8\u843d\u683c\uff0c\u91cd\u5ea6\u62d6\u5ef6\u75c7\u60a3\u8005\uff0c\u8208\u8da3\u662f\u5149\u60f3\u4e0d\u505a\uff0c\u6709\u5f88\u591a\u60f3\u505a\u7684\u4e8b\uff0c\u537b\u4e00\u4ef6\u90fd\u6c92\u6709\u57f7\u884c\u3002\u7121\u804a\u7684\u6642\u5019\u559c\u6b61\u5beb\u6587\u7ae0\uff0c\u767c\u73fe\u81ea\u5df1\u597d\u50cf\u6709\u628a\u4e8b\u60c5\u8b1b\u5f97\u6bd4\u5176\u4ed6\u4eba\u6e05\u695a\u7684\u80fd\u529b\u3002\u76f8\u4fe1\u5206\u4eab\u8207\u4ea4\u6d41\u53ef\u4ee5\u8b93\u4e16\u754c\u66f4\u7f8e\u597d\u3002\bMedium \u6587\u7ae0\u5217\u8868\u8acb\u53c3\u8003\uff1a",Object(r.jsx)("a",{href:"https://aszx87410.github.io/blog/medium",children:"https://aszx87410.github.io/blog/medium"})]}),Object(r.jsx)(xn,{})]})]})};function On(){var n=Object(u.a)(["\n  color: red;\n"]);return On=function(){return n},n}function gn(){var n=Object(u.a)(["\n  margin-top:10px;  \n  margin-bottom:20px;\n  word-wrap: break-word;\n  width:500px;\n  height:300px;\n  "]);return gn=function(){return n},n}function vn(){var n=Object(u.a)(["\n  margin-top:10px;\n  margin-bottom:20px;\n  width:500px;\n"]);return vn=function(){return n},n}function mn(){var n=Object(u.a)(["\n  position: absolute;\n  left: 40%;\n  transform: translateX(-80%);\n  height:calc(100vh - 64px);\n  width:100px;\n  padding:30px;\n  z-index:-1;\n  "]);return mn=function(){return n},n}var wn=s.a.div(mn()),yn=s.a.input(vn()),kn=s.a.input(gn()),Sn=s.a.div(On()),Cn=function(){var n=Object(c.useState)(""),t=Object(a.a)(n,2),e=t[0],i=t[1],o=Object(c.useState)(""),u=Object(a.a)(o,2),s=u[0],j=u[1],d=Object(c.useState)(""),l=Object(a.a)(d,2),f=l[0],x=l[1],h=Object(b.f)();return Object(r.jsxs)(wn,{children:[Object(r.jsxs)("form",{onSubmit:function(n){n.preventDefault(),function(n,t){var e=p();return fetch("".concat(z,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(e,s).then((function(n){if(0===n.ok)return x(n.message);alert("\u65b0\u589e\u6587\u7ae0\u6210\u529f"),h.push("/"),window.location.reload()}))},children:[Object(r.jsxs)("div",{children:["\u6a19\u984c\uff1a",Object(r.jsx)(yn,{type:"text",placeholder:"\u8acb\u8f38\u5165\u6587\u7ae0\u6a19\u984c",value:e,onChange:function(n){return i(n.target.value)}})]}),Object(r.jsxs)("div",{children:["\u5167\u6587\uff1a",Object(r.jsx)(kn,{type:"textarea",placeholder:"\u8acb\u8f38\u5165\u5167\u6587",value:s,onChange:function(n){return j(n.target.value)}})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"\u9001\u51fa\u6587\u7ae0"})})]}),f&&Object(r.jsx)(Sn,{children:f})]})};function zn(){var n=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  width: 500px;\n  height: 120px;\n  padding: 20px;\n  margin: 100px auto;\n  border: 1px solid #fbfbfb;\n  box-shadow: 1px 1px 3px #fbfbfb;\n"]);return zn=function(){return n},n}function Dn(){var n=Object(u.a)(["\n  color: red;\n"]);return Dn=function(){return n},n}var En=s.a.div(Dn()),Mn=s.a.form(zn()),Bn=function(){var n=Object(c.useContext)(d).setUser,t=Object(c.useState)(""),e=Object(a.a)(t,2),i=e[0],o=e[1],u=Object(c.useState)(""),s=Object(a.a)(u,2),j=s[0],l=s[1],p=Object(c.useState)(""),x=Object(a.a)(p,2),h=x[0],O=x[1],g=Object(b.f)();return Object(r.jsxs)(Mn,{onSubmit:function(t){t.preventDefault(),O(null),function(n,t){return fetch("".concat(z,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(i,j).then((function(t){if(0===t.ok)return O(t.message);f(t.token),D().then((function(t){if(1!==t.ok)return f(null),O(t.toString());n(t.data),g.push("/")}))}))},children:[Object(r.jsxs)("div",{children:["username:"," ",Object(r.jsx)("input",{value:i,onChange:function(n){return o(n.target.value)}})]}),Object(r.jsxs)("div",{children:["password:"," ",Object(r.jsx)("input",{type:"password",value:j,onChange:function(n){return l(n.target.value)}})]}),Object(r.jsx)("button",{children:"\u767b\u5165"}),h&&Object(r.jsx)(En,{children:h})]})};function In(){var n=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  width: 500px;\n  height: 120px;\n  padding: 20px;\n  margin: 100px auto;\n  border: 1px solid #fbfbfb;\n  box-shadow: 1px 1px 3px #fbfbfb;\n"]);return In=function(){return n},n}function Pn(){var n=Object(u.a)(["\n  color: red;\n"]);return Pn=function(){return n},n}var Un=s.a.div(Pn()),An=s.a.form(In());function Jn(){var n=Object(c.useContext)(d).setUser,t=Object(c.useState)(""),e=Object(a.a)(t,2),i=e[0],o=e[1],u=Object(c.useState)(""),s=Object(a.a)(u,2),j=s[0],l=s[1],p=Object(c.useState)(""),x=Object(a.a)(p,2),h=x[0],O=x[1],g=Object(c.useState)(""),v=Object(a.a)(g,2),m=v[0],w=v[1],y=Object(b.f)();return Object(r.jsxs)(An,{onSubmit:function(t){w(""),t.preventDefault(),function(n,t,e){return fetch("".concat(z,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:t,password:e})}).then((function(n){return n.json()}))}(i,j,h).then((function(t){if(0===t.ok)return w(t.message);f(t.token),D().then((function(t){if(1!==t.ok)return f(""),w(t.toString());n(t.data),y.push("/")}))}))},children:[Object(r.jsxs)("div",{children:["nickname:",Object(r.jsx)("input",{value:i,onChange:function(n){return o(n.target.value)},required:!0})]}),Object(r.jsxs)("div",{children:["username:",Object(r.jsx)("input",{value:j,onChange:function(n){return l(n.target.value)},required:!0})]}),Object(r.jsxs)("div",{children:["password:",Object(r.jsx)("input",{value:h,type:"password",onChange:function(n){return O(n.target.value)},required:!0})]}),Object(r.jsx)("button",{type:"submit",children:"\u8a3b\u518a"}),m&&Object(r.jsx)(Un,{children:m})]})}function Nn(){var n=Object(u.a)(["\n  margin-right:30px;\n"]);return Nn=function(){return n},n}function Tn(){var n=Object(u.a)(["\n  display: flex;\n"]);return Tn=function(){return n},n}function _n(){var n=Object(u.a)(["\n  color: rgba(41, 41, 41, 1);\n  margin-bottom: 30px;\n  font-style: normal;\n  font-weight: 400;\n  text-align: center;\n  word-break: break-word;\n"]);return _n=function(){return n},n}function Hn(){var n=Object(u.a)(["\n  margin: 30px 300px;\n  padding: 20px;\n  color: rgba(0,0,0,0.8);\n  position: relative;\n  min-height: 400px;\n  border: solid 1px red;\n  text-align: left;\n  overflow:scroll;\n"]);return Hn=function(){return n},n}var qn=s.a.div(Hn()),Ln=s.a.h1(_n()),Fn=s.a.div(Tn()),Qn=s.a.div(Nn());var Xn=function(n){var t=n.postID,e=n.posts,c=[];e.posts.map((function(n){n.id===parseInt(t)&&c.push(n)}));var i=function(n){var t=new Date;t.setTime(n);var e=t.getFullYear(),r=t.getMonth()+1,c=t.getDate(),i=t.getHours(),o=t.getMinutes(),a=t.getSeconds(),u=t.getMilliseconds();return e+"-"+r+"-"+c+" "+i+":"+o+":"+a+"."+u}(c[0].createdAt);return console.log(i),Object(r.jsxs)(qn,{children:[Object(r.jsx)(Ln,{children:c[0].title}),Object(r.jsxs)(Fn,{children:[Object(r.jsxs)(Qn,{children:["User \u7de8\u865f\uff1a",c[0].userId]}),Object(r.jsxs)("div",{children:["\u5275\u5efa\u6642\u9593\uff1a",i]})]}),Object(r.jsx)("div",{children:c[0].body})]})};function Yn(){var n=Object(u.a)(["\n  padding-top: 56px;\n  box-sizing:border-box;\n"]);return Yn=function(){return n},n}var Wn=s.a.div(Yn()),Rn=function(n){var t=Object(b.h)().slug;return Object(r.jsx)(Xn,{postID:t,posts:n})};var Zn=function(){var n=Object(c.useState)(null),t=Object(a.a)(n,2),e=t[0],i=t[1],o=Object(c.useState)([]),u=Object(a.a)(o,2),s=u[0],l=u[1];return Object(c.useEffect)((function(){D().then((function(n){n.ok&&i(n.data)}))}),[]),Object(r.jsx)(d.Provider,{value:{user:e,setUser:i},children:Object(r.jsx)(Wn,{children:Object(r.jsxs)(j.a,{children:[Object(r.jsx)(C,{}),Object(r.jsxs)(b.c,{children:[Object(r.jsx)(b.a,{exact:!0,path:"/",children:Object(r.jsx)(X,{posts:s,setPosts:l})}),Object(r.jsx)(b.a,{exact:!0,path:"/ReactBlog",children:Object(r.jsx)(X,{posts:s,setPosts:l})}),Object(r.jsx)(b.a,{exact:!0,path:"/post-list",children:Object(r.jsx)(on,{})}),Object(r.jsx)(b.a,{exact:!0,path:"/about",children:Object(r.jsx)(hn,{})}),Object(r.jsx)(b.a,{exact:!0,path:"/new-post",children:Object(r.jsx)(Cn,{})}),Object(r.jsx)(b.a,{path:"/posts/:slug",children:Object(r.jsx)(Rn,{posts:s})}),Object(r.jsx)(b.a,{exact:!0,path:"/register",children:Object(r.jsx)(Jn,{})}),Object(r.jsx)(b.a,{exact:!0,path:"/login",children:Object(r.jsx)(Bn,{})})]})]})})})};o.a.render(Object(r.jsx)(Zn,{}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.94188985.chunk.js.map